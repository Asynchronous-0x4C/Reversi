<!DOCTYPE html><html lang="ja" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.4.3"><title>Reversi</title><style>.stone{border-radius:50%;width:80%;height:80%;position:relative;top:50%;left:50%;transform:translate(-50%,-50%);filter:drop-shadow(5px 5px 3px #0008)}.black{background:radial-gradient(circle at 25% 25%,#585858,#333)}.white{background:radial-gradient(circle at 25% 25%,#f8f8f8,#ddd)}.highlight{border-color:#ff0!important}html,body{margin:0;width:100%;height:100%;background-color:#eee}
#outer[data-astro-cid-o3dbrnri]{display:grid;place-items:center;width:100vw;height:100vh}.board-outer[data-astro-cid-o3dbrnri]{display:grid;grid-template-rows:9vmin 72vmin;grid-template-columns:9vmin 72vmin;width:81vmin;height:81vmin}#theme-row[data-astro-cid-o3dbrnri]{display:grid;grid-template-columns:repeat(8,9vmin);grid-template-rows:9vmin}#theme-column[data-astro-cid-o3dbrnri]{display:grid;grid-template-columns:9vmin;grid-template-rows:repeat(8,9vmin)}.input[data-astro-cid-o3dbrnri]{width:9vmin;height:9vmin;border:none;background-color:transparent;text-align:center;font-size:2.5vmin}#board[data-astro-cid-o3dbrnri]{display:grid;grid-template-columns:repeat(8,9vmin);grid-template-rows:repeat(8,9vmin);position:relative;width:72vmin;height:72vmin;background:radial-gradient(circle at 25% 25%,#6b6,#5a5)}.block[data-astro-cid-o3dbrnri]{background-color:transparent;box-sizing:border-box;border:2px solid #555}
</style></head> <body data-astro-cid-sckkx6r4>  <div id="outer" data-astro-cid-o3dbrnri> <div class="board-outer" data-astro-cid-o3dbrnri> <div data-astro-cid-o3dbrnri></div> <div id="theme-row" data-astro-cid-o3dbrnri> <input type="text" class="input" data-position="0" value="1" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="1" value="2" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="2" value="3" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="3" value="4" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="4" value="5" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="5" value="6" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="6" value="7" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="7" value="8" data-astro-cid-o3dbrnri> </div> <div id="theme-column" data-astro-cid-o3dbrnri> <input type="text" class="input" data-position="0" value="1" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="1" value="2" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="2" value="3" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="3" value="4" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="4" value="5" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="5" value="6" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="6" value="7" data-astro-cid-o3dbrnri><input type="text" class="input" data-position="7" value="8" data-astro-cid-o3dbrnri> </div> <div id="board" data-astro-cid-o3dbrnri> <div class="block" data-position="0,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,0" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,1" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,2" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,3" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,4" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,5" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,6" data-astro-cid-o3dbrnri></div><div class="block" data-position="0,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="1,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="2,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="3,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="4,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="5,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="6,7" data-astro-cid-o3dbrnri></div><div class="block" data-position="7,7" data-astro-cid-o3dbrnri></div> </div> </div> </div>   <script type="module">const b=document.getElementById("theme-row").children,f=document.getElementById("theme-column").children;class m{board;player=1;constructor(s){this.board=new Array(8);for(let e=0;e<8;e++){this.board[e]=new Array(8);for(let t=0;t<8;t++)this.board[e][t]=new u(s[e][t],this)}this.initialize(s)}initialize(s){for(let e=0;e<8;e++)for(let t=0;t<8;t++)this.board[e][t].setState(0);this.board[3][3].setState(1),this.board[3][4].setState(2),this.board[4][3].setState(2),this.board[4][4].setState(1),this.update()}update(s){this.player=this.player==1?2:1;for(let t=0;t<8;t++)for(let i=0;i<8;i++)this.board[t][i].setHighlight(!1),this.check(t,i,this.board[t][i]);let e=!1;for(let t=0;t<8;t++)for(let i=0;i<8;i++)this.board[t][i].getState()==0&&this.board[t][i].directions.length>0&&(this.board[t][i].setHighlight(!0),e=!0);if(!e){if(s){alert("ゲーム終了");let t=0,i=0;for(let a=0;a<8;a++)for(let r=0;r<8;r++)this.board[a][r].getState()==1&&i++,this.board[a][r].getState()==2&&t++;t>i?alert("白の勝ち"):t<i?alert("黒の勝ち"):alert("引き分け"),this.initialize(this.board.map(a=>a.map(r=>r.getElement())))}this.update(!0)}}check(s,e,t){let i=!1;if(t.directions=[],this.board[s][e].getState()!=0)return!1;for(let a=0;a<8;a++){let r=s,o=e,c=0;for(;r+=d[a][0],o+=d[a][1],!(r<0||r>=8||o<0||o>=8||this.board[r][o].getState()==0);){if(this.board[r][o].getState()==this.player){c>0&&(i=!0,t.directions.push(d[a]));break}c++}}return i}reverse(s){let e=Number(s.dataset.position.split(",")[0]),t=Number(s.dataset.position.split(",")[1]);this.board[e][t].setState(this.player);for(let i=0;i<this.board[e][t].directions.length;i++){let a=e,r=t;for(;a+=this.board[e][t].directions[i][0],r+=this.board[e][t].directions[i][1],!(a<0||a>=8||r<0||r>=8||this.board[a][r].getState()==this.player);)this.board[a][r].setState(this.player)}this.update()}}const d=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]];class u{state=0;element;stone;board;directions=[];constructor(s,e){let t=Number(s.dataset.position.split(",")[0]),i=Number(s.dataset.position.split(",")[1]);this.board=e,this.element=s,this.stone=document.createElement("div"),this.stone.classList.add("stone"),s.addEventListener("pointerdown",()=>{this.directions.length!==0&&window.confirm(`お題 : ${b.item(t).value} ${f.item(i).value}
このマスに置きますか？`)&&e.reverse(s)})}setState(s){switch(this.state=s,this.element.childElementCount>0&&this.element.removeChild(this.stone),s){case 0:break;case 1:this.stone.classList.remove("white"),this.stone.classList.add("black"),this.element.appendChild(this.stone);break;case 2:this.stone.classList.remove("black"),this.stone.classList.add("white"),this.element.appendChild(this.stone);break}}setHighlight(s){s?this.element.classList.add("highlight"):this.element.classList.remove("highlight")}getState(){return this.state}getElement(){return this.element}}const h=document.getElementById("board").children;let n=new Array(8);for(let l=0;l<8;l++)n[l]=new Array(8);for(let l=0;l<h.length;l++){let s=Number(h[l].dataset.position.split(",")[0]),e=Number(h[l].dataset.position.split(",")[1]);n[s][e]=h[l]}new m(n);</script>  </body></html>